# RNA-Seq差异分析脚本说明

## 简介
本脚本用于进行RNA-Seq数据的差异分析，支持从芯片数据下载与转换、差异基因分析到GO和KEGG富集分析等功能。通过配置文件`DEG_config.tsv`，用户可以灵活设置分析参数，轻松完成差异分析任务。

## 配置文件说明

### `DEG_config.tsv`文件格式
配置文件`DEG_config.tsv`是脚本运行的核心，其格式和参数如下：

| 参数名称 | 参数值 |
| --- | --- |
| `config` | 配置文件路径 |
| `GSE_number` | 芯片数据GSE号（可选，用于自动下载数据并转换芯片id） |
| `species` | 物种信息（支持人、小鼠、大鼠） |
| `projeid` | 项目编号 |
| `plotid` | 输出文件的编号 |
| `ID_type` | 原始数据的基因ID类型（如果填写`GSE_number`，则填写`SYMBOL`） |
| `pvalue_column` | 差异标准中的p值类型 |
| `pvalue_cutoff` | p值筛选标准 |
| `FC_cutoff` | FC值 |
| `go_analysis` | 是否进行GO和KEGG富集分析 |
| `analysis_type` | 分析方法 |
| `[sample_group]` | 包含样本信息和分组信息的表格，样本列名与表达矩阵列名对应，分组信息需按实验组在前、对照组在后的顺序排列 |

**注意**：请不要随意更改`DEG_config.tsv`文件的布局以及文件名称。

## 数据准备

### 表达矩阵格式
表达矩阵文件名应为`项目编号.txt`或`项目编号.tsv`，其中项目编号与`DEG_config.tsv`文件中的`projeid`一致。文件格式要求如下：

- 使用tab作为分隔符。
- 行名为基因id。
- 列名为样本名称，列名排序无要求，脚本会自动与配置文件的样本列取交集。

## 运行步骤

1. **准备文件**：将配置文件`DEG_config.tsv`和表达矩阵文件放到指定的输出路径中。
2. **激活运行环境**：
   首先需要安装好所有需要的依赖包
3. **开始运行**：运行以下命令启动脚本：
   ```bash
   Rscript 100.RNA_seq.R
   ```

## 输出结果
脚本运行完成后，将在指定路径生成以下输出文件：
- 差异基因分析结果文件
- GO和KEGG富集分析结果文件（如果配置了`go_analysis`为真）

## 注意事项
- 确保配置文件和表达矩阵文件的格式正确，避免因格式问题导致脚本运行失败。
- 如果使用芯片数据，请确保填写正确的`GSE_number`，以便自动下载和转换芯片id。
- 在运行脚本前，请确认运行环境已正确激活。

## 联系人
如在使用过程中遇到问题，请联系简仲翔。
